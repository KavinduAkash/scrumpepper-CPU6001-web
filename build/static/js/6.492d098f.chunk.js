(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[6],{672:function(e,t,a){"use strict";a.r(t),a.d(t,"Profile",(function(){return M}));var s=a(8),n=a.n(s),r=a(18),c=a(27),o=a(28),i=a(32),l=a(31),d=a(0),h=a.n(d),u=a(635),m=a(185),j=a(116),p=a(377),b=a(632),f=a(369),g=a(184),x=a(74),O=(a(15),a(1)),w=a(112),v=a(34),C=a(45),N=(Object(v.b)((function(e){return{navType:e.theme.navType}}),{})((function(e){var t=e.children,a=e.background,s=e.className,n=e.overlap,r=e.navType,c=Object(d.useState)(0),o=Object(w.a)(c,2),i=o[0],l=o[1],h=Object(d.useRef)(null);Object(d.useEffect)((function(){if(r===C.d){var e=window.innerWidth,t=h.current.offsetWidth;l((e-t)/2)}}),[r]);return Object(O.jsx)("div",{ref:h,className:"page-header-alt ".concat(s||""," ").concat(n&&"overlap"),style:function(){var e={backgroundImage:a?"url(".concat(a,")"):"none"};return r===C.d&&(e.marginRight=-i,e.marginLeft=-i,e.paddingLeft=0,e.paddingRight=0),e}(),children:r===C.d?Object(O.jsx)("div",{className:"container",children:t}):Object(O.jsx)(O.Fragment,{children:t})})})),a(186)),y=(a(128),a(70)),_=a(9),S=a.n(_),P=a(33),k=a.n(P),T=a(21),M=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={id:0,username:"",first_name:"",last_name:"",email:"",contact:"",website:"",created_date:"",status:"",passwordx:"",conform_password:"",change:!1,loading:!1},e.loadData=function(){e.setState({loading:!0});var t={"Content-Type":"application/json",Authorization:"Bearer "+S.a.get("68e78905f4c")};k.a.get("".concat(T.a(T.b),"user/details"),{headers:t}).then(function(){var t=Object(r.a)(n.a.mark((function t(a){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(a),s=a.data.body,{},e.setState({id:s.id,username:s.refNo,first_name:s.firstName,last_name:s.lastName,email:s.email,contact:s.contactNumber,website:"",created_date:s.createdDate,status:s.statusType}),e.setState({loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(r.a)(n.a.mark((function t(a){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!1}),e.setState({showMessage:1}),setTimeout((function(){e.setState({showMessage:0})}),2e3);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.onChangeFirstName=function(t){e.setState({first_name:t.target.value})},e.onChangeLastName=function(t){e.setState({last_name:t.target.value})},e.onChangeUsername=function(t){e.setState({username:t.target.value})},e.onChangeMobile=function(t){e.setState({contact:t.target.value})},e.onChangeWebsite=function(t){e.setState({website:t.target.value})},e.onChangePassword=function(t){e.setState({passwordx:t.target.value})},e.onChangeConformPassword=function(t){e.setState({conform_password:t.target.value})},e.onChangePasswordCheckbox=function(t){e.setState({change:!e.state.change,password:"",conform_password:""})},e.onUpdate=function(){""==e.state.first_name?p.b.error("Please, enter first name"):""==e.state.last_name?p.b.error("Please, enter last name"):e.state.change?""===e.state.passwordx?p.b.error("Please, enter password"):""===e.state.conform_password?p.b.error("Please, enter conform password"):e.state.conform_password===e.state.passwordx?e.updateData():p.b.error("Password and conform password does not match"):e.updateData()},e.updateData=function(){e.setState({loading:!0});var t={"Content-Type":"application/json",Authorization:"Bearer "+S.a.get("68e78905f4c")},a={id:e.state.id,refNo:e.state.username,firstName:e.state.first_name,lastName:e.state.last_name,contactNumber:e.state.contact,password:""===e.state.passwordx?null:e.state.passwordx,statusType:e.state.status};k.a.put("".concat(T.a(T.b),"user/update"),a,{headers:t}).then(function(){var t=Object(r.a)(n.a.mark((function t(a){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200===a.status&&a.data.success&&(p.b.success("Your details updated successfully"),e.setState({change:!1,password:"",conform_password:""}),e.loadData()),e.setState({loading:!1});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(r.a)(n.a.mark((function t(a){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!1}),e.setState({showMessage:1}),setTimeout((function(){e.setState({showMessage:0})}),2e3);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){""!=S.a.get("68e78905f4c")&&null!=S.a.get("68e78905f4c")&&void 0!=S.a.get("68e78905f4c")||this.props.history.push("/auth/login"),this.loadData()}},{key:"render",value:function(){var e=this.state.email;return e.length>20&&(e=e.substring(0,20)+"..."),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container my-4",children:[Object(O.jsx)(u.a,{style:{border:"1px solid black"},children:Object(O.jsx)(m.a,{justify:"center",children:Object(O.jsx)(j.a,{sm:24,md:24,lg:24,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"rounded p-2 bg-white shadow-sm mx-auto",style:{border:"1px solid black",marginTop:"-3.5rem",maxWidth:"".concat(166,"px")},children:Object(O.jsx)(b.a,{shape:"square",size:150,src:"/img/avatars/user-vector.jpg"})}),Object(O.jsx)(N.a,{alignItems:"center",mobileFlex:!1,className:"mb-5 mt-3 text-center",justifyContent:"center",children:Object(O.jsxs)("h2",{className:"mb-0 mt-md-0 mt-2",children:[this.state.first_name," ",this.state.last_name]})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)(m.a,{style:{justifyContent:"center"},children:[Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"First Name"}),Object(O.jsx)("span",{className:"required-text",children:"*"}),Object(O.jsx)(f.a,{placeholder:"First Name",value:this.state.first_name,onChange:this.onChangeFirstName})]}),Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"Last Name"}),Object(O.jsx)("span",{className:"required-text",children:"*"}),Object(O.jsx)(f.a,{placeholder:"Last Name",value:this.state.last_name,onChange:this.onChangeLastName})]})]}),Object(O.jsxs)(m.a,{style:{justifyContent:"center"},children:[Object(O.jsxs)(j.a,{className:"m-2",md:6,lg:6,xl:6,children:[Object(O.jsx)("span",{children:"Ref Name"}),Object(O.jsx)("span",{className:"required-text",children:"*"}),Object(O.jsx)(f.a,{placeholder:"Ref Name",value:this.state.username,disabled:!0,onChange:this.onChangeUsername})]}),Object(O.jsxs)(j.a,{className:"m-2",md:16,lg:16,xl:16,children:[Object(O.jsx)("span",{children:"Email"}),Object(O.jsx)("span",{className:"required-text",children:"*"}),Object(O.jsx)(f.a,{type:"email",placeholder:"email",disabled:!0,value:this.state.email})]})]}),Object(O.jsxs)(m.a,{style:{justifyContent:"center"},children:[Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"Mobile"}),Object(O.jsx)(f.a,{placeholder:"Mobile",value:this.state.contact,onChange:this.onChangeMobile})]}),Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"Website"}),Object(O.jsx)(f.a,{placeholder:"www.example.com",value:this.state.website,onChange:this.onChangeWebsite})]})]}),Object(O.jsx)(m.a,{style:{justifyContent:"center"},children:Object(O.jsx)(j.a,{className:"mt-2",md:22,lg:22,xl:22,children:Object(O.jsx)(g.a,{onChange:this.onChangePasswordCheckbox,children:"Change Password"})})}),this.state.change?Object(O.jsxs)(m.a,{style:{justifyContent:"center"},children:[Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"Password"}),Object(O.jsx)(f.a.Password,{autoComplete:"new-password",placeholder:"New Password",value:this.state.passwordx,onChange:this.onChangePassword})]}),Object(O.jsxs)(j.a,{className:"m-2",md:11,lg:11,xl:11,children:[Object(O.jsx)("span",{children:"Conform Password"})," ",""!==this.state.password?Object(O.jsx)("span",{className:"required-text",children:"*"}):null,Object(O.jsx)(f.a.Password,{placeholder:"Conform Password",value:this.state.conform_password,onChange:this.onChangeConformPassword})]})]}):null,Object(O.jsx)(m.a,{style:{justifyContent:"center"},children:Object(O.jsx)(j.a,{className:"text-right",md:22,lg:22,xl:22,children:Object(O.jsx)(x.a,{type:"primary",onClick:this.onUpdate,children:"Update"})})})]})]})})})}),this.state.loading?Object(O.jsx)("div",{className:"loading-overlay-2",children:Object(O.jsx)("div",{className:"bounce-loader",children:Object(O.jsx)("img",{src:"/img/preloader.gif",alt:""})})}):null]})})}}]),a}(h.a.Component);t.default=Object(y.h)(M)}}]);
//# sourceMappingURL=6.492d098f.chunk.js.map